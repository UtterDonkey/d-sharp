"use strict";var b=Object.create;var m=Object.defineProperty;var k=Object.getOwnPropertyDescriptor;var v=Object.getOwnPropertyNames;var F=Object.getPrototypeOf,L=Object.prototype.hasOwnProperty;var P=(e,t)=>{for(var n in t)m(e,n,{get:t[n],enumerable:!0})},x=(e,t,n,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of v(t))!L.call(e,r)&&r!==n&&m(e,r,{get:()=>t[r],enumerable:!(a=k(t,r))||a.enumerable});return e};var M=(e,t,n)=>(n=e!=null?b(F(e)):{},x(t||!e||!e.__esModule?m(n,"default",{value:e,enumerable:!0}):n,e)),U=e=>x(m({},"__esModule",{value:!0}),e);var A={};P(A,{decodeUTF8:()=>y,encodeUTF8:()=>d,minify:()=>S,minifyTemplates:()=>K,stripWhitespace:()=>E,writeFiles:()=>$});module.exports=U(A);var h=M(require("@ampproject/remapping")),l=require("astray"),w=M(require("magic-string")),T=require("meriyah"),u=require("fs/promises"),g=require("path"),C=new TextEncoder,I=new TextDecoder,d=e=>C.encode(e),y=e=>I.decode(e);function E(e,t){let n=e.replace(/\s+/gm," ").replace(/> </g,"><").replace(/^ </g,"<").replace(/> $/g,">").replace(/> #(\w+) </g,">#$1<");return t||(n=n.replace(/<!--.*?-->/gs,"")),n}function S(e,t={}){let n=new w.default(e),a=[],r=(0,T.parse)(e,{next:!0,loc:!0,ranges:!0,module:!0,onComment(o,i,p,f,s){o==="MultiLine"&&i.trim()==="! minify-templates-ignore"&&a.push(s.end.line+1)}});return(0,l.walk)(r,{TemplateLiteral(o){var i,p;return a.includes(o.loc.start.line)||t.taggedOnly&&((p=(i=o.path)==null?void 0:i.parent)==null?void 0:p.type)!=="TaggedTemplateExpression"?l.SKIP:void 0},TemplateElement(o){let{start:i,end:p}=o.loc;(i.line!==p.line||i.column!==p.column)&&n.overwrite(o.start,o.end,E(o.value.raw,t.keepComments))}}),n}var K=(e={})=>({name:"minify-templates",setup(t){t.initialOptions.write===!1&&t.onEnd(n=>{var a;(a=n.outputFiles)==null||a.forEach((r,o,i)=>{if((0,g.extname)(r.path)!==".js")return;let p=y(r.contents),f=S(p,e);i[o].contents=d(f.toString());let s=i.findIndex(c=>c.path===`${r.path}.map`);if(s>-1){let c=i[s],O=(0,h.default)([{...f.generateDecodedMap({source:r.path,file:c.path,hires:!0}),version:3},y(c.contents)],()=>null);i[s].contents=d(O.toString())}})})}}),$=()=>({name:"write-files",setup(e){e.initialOptions.write===!1&&e.onEnd(async t=>{t.outputFiles&&await Promise.all(t.outputFiles.map(n=>(0,u.mkdir)((0,g.dirname)(n.path),{recursive:!0}).then(()=>(0,u.writeFile)(n.path,n.contents,"utf8"))))})}});0&&(module.exports={decodeUTF8,encodeUTF8,minify,minifyTemplates,stripWhitespace,writeFiles});
//# sourceMappingURL=index.js.map
